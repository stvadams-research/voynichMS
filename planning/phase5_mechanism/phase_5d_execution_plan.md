# Phase 5D Execution Plan: Deterministic Line Grammar and Slot Structure

**Project:** Voynich Manuscript, Structural Admissibility Program  
**Phase:** 5D  
**Phase Name:** Deterministic Line Grammar  
**Goal Type:** Deterministic phase5_mechanism identifiability under line-level exclusion  
**Primary Goal:** Identify and characterize deterministic, non-repeating, line-scoped generative structures that can account for Voynich’s extreme within-line uniqueness, low entropy, strong successor constraints, and complete inter-line resets.

---

## 1. Phase 5D Purpose and Core Question

### 1.1 Core question
What deterministic line-level rule systems, operating under hard exclusion and reset at line boundaries, are sufficient to generate Voynich-like lines while remaining consistent with all prior structural, identifiability, and workflow constraints?

### 1.2 Why Phase 5D exists
Phase 5C established that:
- Stochastic line generation is eliminated.
- Pool-based sampling fails on TTR and entropy simultaneously.
- Line-level structure is rigid, ordered, and non-repeating.
- Constraints reset completely at line boundaries.

These findings force a transition from workflow phase4_inference to **instructional structure phase4_inference**.

### 1.3 What Phase 5D is not
- Not a semantic phase2_analysis.
- Not a decoding attempt.
- Not a historical reconstruction.
- Not a return to probabilistic grammars.

Phase 5D studies deterministic construction rules only.

### 1.4 Success criteria
Phase 5D is successful if it produces:
- A small set of deterministic line-grammar families sufficient to reproduce observed line statistics.
- Bounds on slot count, slot ordering, and exclusion rules.
- Elimination of deterministic subclasses incompatible with the data.
- A clear statement of which deterministic structures remain observationally equivalent.

---

## 2. Phase 5D Design Principles

### 2.1 Determinism as a hard constraint
All candidate models must:
- Generate lines without probabilistic choice once parameters are fixed.
- Enforce non-reuse of tokens within a line.
- Reset all state at line boundaries.

### 2.2 Line as the only memory scope
No rule may depend on tokens from previous lines.
Global statistics may emerge only from parameter distributions, not state persistence.

### 2.3 Slot-based abstraction
Lines are modeled as ordered sequences of slots.
Each slot has:
- an allowed token set
- positional constraints
- exclusion rules based on prior slots

### 2.4 Minimal sufficiency
Any rule, slot, or constraint not required to match data is eliminated.

---

## 3. Deterministic Grammar Abstraction

### 3.1 Canonical line grammar form
A line is generated by:
1) Initializing an empty exclusion set  
2) Iterating over ordered slots S₁ … Sₙ  
3) Selecting exactly one token per slot from its allowed set minus exclusions  
4) Adding the selected token to the exclusion set  

No backtracking or randomness is permitted unless explicitly tested.

### 3.2 Slot properties (to be inferred)
- Slot index and count per line
- Allowed token class per slot
- Conditional dependencies between slots
- Positional markers (initial, medial, terminal)
- Optional slots or early termination rules

---

## 4. Deterministic Grammar Families to Evaluate

### 4.1 Fixed Slot Template
- Fixed number of slots per line.
- Each slot has a fixed allowed token class.
- Order invariant across the manuscript.

**Vulnerability:** Inflexible line lengths and patterns.

### 4.2 Variable-Length Slot Template
- Slot count varies per line within bounds.
- Optional or repeatable slots allowed.
- Termination rules determine line length.

**Vulnerability:** Risk of reintroducing hidden stochasticity.

### 4.3 Traversal-Based Deterministic Grammar
- Line corresponds to traversal of a structured object.
- Traversal path deterministic but parameterized per line.

**Vulnerability:** May reintroduce persistence if traversal state leaks.

### 4.4 Constraint Satisfaction Grammar
- Line generated by satisfying a set of ordered constraints.
- Token order emerges from constraint resolution, not predefined slots.

**Vulnerability:** Over-flexibility and hidden degrees of freedom.

Deliverable:
- `reports/PHASE_5D_GRAMMAR_CLASSES.md`

---

## 5. Necessary Consequences at the Grammar Level

Phase 5D defines **grammar-specific necessary consequences**.

### 5.1 Universal grammar consequences
- Near-unity line TTR.
- Low line-level entropy consistent with Voynich.
- Sharp successor constraints aligned with slot boundaries.
- No cross-line predictive lift.

### 5.2 Slot-structure consequences
- Token classes must show strong positional bias.
- Successor entropy should drop sharply at slot transitions.
- Line length distribution must correspond to slot count distribution.

### 5.3 Elimination logic
A grammar family is eliminated if:
- It requires probabilistic choice to match entropy.
- It permits token reuse within a line.
- It produces line-length or positional statistics incompatible with data.

Deliverable:
- `reports/PHASE_5D_NECESSARY_CONSEQUENCES.md`

---

## 6. Signature Tests and Analyses

### 6.1 Slot boundary detection
**Objective:**  
Detect implicit slot boundaries in real Voynich lines.

**Methods may include:**
- Change-point detection on successor entropy
- Positional mutual information phase2_analysis
- Clustering of token classes by position

**Kill criteria:**
- No stable boundary structure beyond chance.

---

### 6.2 Positional class consistency
**Objective:**  
Test whether tokens occupy stable positional roles.

**Methods may include:**
- Positional frequency heatmaps
- Cross-line positional variance
- Comparison to deterministic simulators

**Kill criteria:**
- Positional roles too diffuse to support slot grammar.

---

### 6.3 Deterministic simulator sufficiency
**Objective:**  
Implement minimal deterministic generators for each grammar family.

**Validation targets:**
- Line-level TTR
- Line-level entropy
- Successor entropy profile
- Phase 5B reset scores
- Phase 3 repetition and locality metrics

**Kill criteria:**
- Simulator requires ad hoc exceptions or hidden randomness.

---

### 6.4 Overconstraint detection
**Objective:**  
Ensure grammar is not too rigid compared to real data.

**Methods may include:**
- Variance comparison across lines
- Sensitivity to small parameter changes
- Adversarial relaxation tests

**Kill criteria:**
- Real data shows variability incompatible with grammar rigidity.

---

## 7. Generator and Comparator Suite

### 7.1 Deterministic simulators
For each grammar family:
- One minimal simulator
- One relaxed variant
- One adversarial variant

### 7.2 Matching requirements
Simulators must be matched to Voynich on:
- token inventory
- global frequency profile
- line length distribution

Deliverables:
- `src/phase5_mechanism/deterministic_grammar/`
- `governance/DETERMINISTIC_SIMULATOR_SPEC.md`

---

## 8. Run Structure and Provenance

### 8.1 Canonical run manifest additions
Each run must record:
- grammar family ID
- slot configuration
- exclusion rules
- sufficiency outcome
- eliminated versus retained constraints

### 8.2 Folder structure

- `src/phase5_mechanism/deterministic_grammar/`
- `phase2_analysis/phase5_mechanism/deterministic_grammar/`
- `configs/phase5_mechanism/deterministic_grammar/`
- `runs/phase5_mechanism/<run_id>/`
- `results/phase5_mechanism/deterministic_grammar/`
- `reports/`

---

## 9. Evaluation and Outcome Labels

### 9.1 Grammar outcome categories
Each grammar family receives exactly one label:
- **Eliminated:** incompatible with observed line structure
- **Sufficient:** reproduces all tested signatures
- **Equivalent:** indistinguishable from another grammar family
- **Underdetermined:** insufficient resolution to test key properties

### 9.2 Equivalence handling
If multiple grammars remain equivalent:
- Document which additional evidence would separate them.
- Classify evidence as text-internal or external.

Deliverable:
- `reports/PHASE_5D_EQUIVALENCE.md`

---

## 10. Interpretation Boundary

Phase 5D is allowed to conclude:
- Whether Voynich lines are generated by deterministic slot-based grammars.
- The minimal structural form such grammars must take.
- Which deterministic families are incompatible with the data.

Phase 5D is not allowed to conclude:
- That the grammar encodes meaning.
- That slots correspond to linguistic units.
- That the grammar reflects authorial intent.

---

## 11. Phase 5D Termination Statement

Phase 5D evaluates deterministic line-level grammars as candidates for the Voynich Manuscript’s production phase5_mechanism. By testing slot structure, exclusion rules, and deterministic sufficiency, Phase 5D further collapses the space of admissible explanations without invoking semantics. Progress beyond this phase requires either external anchoring evidence or a change in inferential scope.

---

## 12. Immediate Next Actions

1) Freeze deterministic grammar families  
2) Pre-register grammar-level necessary consequences  
3) Implement slot-boundary detection on real data  
4) Build minimal deterministic simulators  
5) Run sufficiency benchmarks against Voynich  
6) Decide whether grammar space collapses or remains equivalent
